<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>HPXML File Editor</title>
	<style>
		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 20px;
		}
		.upload-section {
			border: 2px dashed #ccc;
			padding: 20px;
			text-align: center;
			margin-bottom: 20px;
		}
		.editor-section {
			display: none;
		}
		.form-group {
			margin-bottom: 15px;
			padding: 10px;
			border: 1px solid #ddd;
		}
		.form-group label {
			display: block;
			margin-bottom: 5px;
			font-weight: bold;
		}
		.form-group input, .form-group select {
			width: 100%;
			padding: 8px;
			margin-bottom: 5px;
		}
		.section-header {
			background: #f5f5f5;
			padding: 10px;
			margin: 10px 0;
			font-weight: bold;
		}
		.button {
			padding: 10px 20px;
			background-color: #4CAF50;
			color: white;
			border: none;
			cursor: pointer;
			margin: 5px;
		}
		.button:hover {
			background-color: #45a049;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>HPXML File Editor</h1>
		<div class="upload-section">
			<input type="file" id="fileInput" accept=".xml">
			<p>Drag and drop HPXML file or click to select</p>
		</div>
		<div class="editor-section" id="editorSection">
			<div class="section-header">XML Transaction Header</div>
			<div class="form-group">
				<label for="xmlType">XML Type</label>
				<select id="xmlType">
					<option value="BPI-2101">BPI-2101</option>
				</select>
				<label for="xmlGeneratedBy">Generated By</label>
				<input type="text" id="xmlGeneratedBy">
				<label for="createdDateTime">Created Date/Time</label>
				<input type="datetime-local" id="createdDateTime">
			</div>

			<div class="section-header">Customer Information</div>
			<div class="form-group">
				<label for="firstName">First Name</label>
				<input type="text" id="firstName">
				<label for="lastName">Last Name</label>
				<input type="text" id="lastName">
			</div>

			<div class="section-header">Building Site</div>
			<div class="form-group">
				<label for="address1">Address 1</label>
				<input type="text" id="address1">
				<label for="address2">Address 2</label>
				<input type="text" id="address2">
				<label for="city">City</label>
				<input type="text" id="city">
				<label for="state">State</label>
				<input type="text" id="state">
				<label for="zipCode">Zip Code</label>
				<input type="text" id="zipCode">
			</div>

			<div class="section-header">Building Details</div>
			<div class="form-group">
				<label for="buildingType">Building Type</label>
				<select id="buildingType">
					<option value="single-family detached">Single-family Detached</option>
					<option value="single-family attached">Single-family Attached</option>
					<option value="manufactured home">Manufactured Home</option>
				</select>
				<label for="yearBuilt">Year Built</label>
				<input type="number" id="yearBuilt">
				<label for="conditionedFloorArea">Conditioned Floor Area (sq ft)</label>
				<input type="number" id="conditionedFloorArea">
			</div>

			<div class="section-header">Air Infiltration</div>
			<div class="form-group">
				<label for="blowerDoorTest">Blower Door Test Type</label>
				<select id="blowerDoorTest">
					<option value="depressurization">Depressurization</option>
					<option value="pressurization">Pressurization</option>
				</select>
				<label for="housePressure">House Pressure (Pa)</label>
				<input type="number" id="housePressure">
				<label for="airLeakage">Air Leakage (CFM)</label>
				<input type="number" id="airLeakage">
			</div>

			<div class="section-header">HVAC Systems</div>
			<div class="form-group">
				<label for="heatingSystemType">Heating System Type</label>
				<select id="heatingSystemType">
					<option value="Furnace">Furnace</option>
					<option value="Boiler">Boiler</option>
					<option value="Heat Pump">Heat Pump</option>
				</select>
				<label for="heatingFuel">Heating Fuel</label>
				<select id="heatingFuel">
					<option value="natural gas">Natural Gas</option>
					<option value="electricity">Electricity</option>
					<option value="fuel oil">Fuel Oil</option>
				</select>
				<label for="heatingEfficiency">Heating Efficiency (AFUE)</label>
				<input type="number" step="0.01" id="heatingEfficiency">
			</div>

			<div class="form-group">
				<label for="coolingSystemType">Cooling System Type</label>
				<select id="coolingSystemType">
					<option value="central air conditioner">Central Air Conditioner</option>
					<option value="heat pump">Heat Pump</option>
				</select>
				<label for="coolingEfficiency">Cooling Efficiency (SEER)</label>
				<input type="number" step="0.1" id="coolingEfficiency">
			</div>

			<div class="section-header">Water Heating</div>
			<div class="form-group">
				<label for="waterHeaterType">Water Heater Type</label>
				<select id="waterHeaterType">
					<option value="storage water heater">Storage Water Heater</option>
					<option value="tankless">Tankless</option>
					<option value="heat pump water heater">Heat Pump Water Heater</option>
				</select>
				<label for="waterHeaterFuel">Fuel Type</label>
				<select id="waterHeaterFuel">
					<option value="natural gas">Natural Gas</option>
					<option value="electricity">Electricity</option>
				</select>
				<label for="waterHeaterEfficiency">Energy Factor</label>
				<input type="number" step="0.01" id="waterHeaterEfficiency">
			</div>

			<button class="button" onclick="generateXML()">Generate HPXML</button>
			<button class="button" onclick="validateXML()">Validate HPXML</button>
			<button class="button" onclick="downloadXML()">Download XML</button>
		</div>
	</div>

	<script>
		const fileInput = document.getElementById('fileInput');
		const editorSection = document.getElementById('editorSection');

		fileInput.addEventListener('change', handleFileSelect);

		function handleFileSelect(event) {
			const file = event.target.files[0];
			if (file) {
				const reader = new FileReader();
				reader.onload = function(e) {
					populateFormFromXML(e.target.result);
					editorSection.style.display = 'block';
				};
				reader.readAsText(file);
			}
		}

		function populateFormFromXML(xmlString) {
			const parser = new DOMParser();
			const xmlDoc = parser.parseFromString(xmlString, 'text/xml');
			// Add code to populate form fields from XML
		}

		function generateXML() {
			// Add code to generate XML from form fields
			const xmlString = ''; // Generate XML string
			return xmlString;
		}

		function validateXML() {
			const xmlString = generateXML();
			try {
				const parser = new DOMParser();
				const xmlDoc = parser.parseFromString(xmlString, 'text/xml');
				if (xmlDoc.getElementsByTagName('parsererror').length > 0) {
					throw new Error('Invalid XML');
				}
				alert('XML is valid!');
			} catch (error) {
				alert('Invalid XML: ' + error.message);
			}
		}

		function downloadXML() {
			const xmlString = generateXML();
			const blob = new Blob([xmlString], {type: 'text/xml'});
			const url = window.URL.createObjectURL(blob);
			const a = document.createElement('a');
			a.href = url;
			a.download = 'hpxml_file.xml';
			a.click();
			window.URL.revokeObjectURL(url);
		}
	</script>
</body>
</html>
