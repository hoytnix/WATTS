<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>HPXML File Editor</title>
	<style>
		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 20px;
		}
		.upload-section {
			border: 2px dashed #ccc;
			padding: 20px;
			text-align: center;
			margin-bottom: 20px;
		}
		.editor-section {
			display: none;
		}
		#xmlEditor {
			width: 100%;
			height: 500px;
			font-family: monospace;
			padding: 10px;
			margin-bottom: 10px;
		}
		.button {
			padding: 10px 20px;
			background-color: #4CAF50;
			color: white;
			border: none;
			cursor: pointer;
			margin: 5px;
		}
		.button:hover {
			background-color: #45a049;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>HPXML File Editor</h1>
		<div class="upload-section">
			<input type="file" id="fileInput" accept=".xml">
			<p>Drag and drop HPXML file or click to select</p>
		</div>
		<div class="editor-section" id="editorSection">
			<textarea id="xmlEditor"></textarea>
			<button class="button" onclick="saveChanges()">Save Changes</button>
			<button class="button" onclick="validateXML()">Validate HPXML</button>
			<button class="button" onclick="downloadXML()">Download XML</button>
		</div>
	</div>

	<script>
		const fileInput = document.getElementById('fileInput');
		const xmlEditor = document.getElementById('xmlEditor');
		const editorSection = document.getElementById('editorSection');

		fileInput.addEventListener('change', handleFileSelect);

		function handleFileSelect(event) {
			const file = event.target.files[0];
			if (file) {
				const reader = new FileReader();
				reader.onload = function(e) {
					xmlEditor.value = e.target.result;
					editorSection.style.display = 'block';
				};
				reader.readAsText(file);
			}
		}

		function saveChanges() {
			localStorage.setItem('hpxmlContent', xmlEditor.value);
			alert('Changes saved!');
		}

		function validateXML() {
			try {
				const parser = new DOMParser();
				const xmlDoc = parser.parseFromString(xmlEditor.value, 'text/xml');
				if (xmlDoc.getElementsByTagName('parsererror').length > 0) {
					throw new Error('Invalid XML');
				}
				// Add HPXML-specific validation here
				alert('XML is valid!');
			} catch (error) {
				alert('Invalid XML: ' + error.message);
			}
		}

		function downloadXML() {
			const blob = new Blob([xmlEditor.value], {type: 'text/xml'});
			const url = window.URL.createObjectURL(blob);
			const a = document.createElement('a');
			a.href = url;
			a.download = 'hpxml_file.xml';
			a.click();
			window.URL.revokeObjectURL(url);
		}
	</script>
</body>
</html>
